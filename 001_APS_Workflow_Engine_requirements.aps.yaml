process:
  name: "001_APS_Workflow_Engine_Implementation"
  description: "Build core APS workflow execution engine to automate agent coordination and process management"
  roles:
    - name: "PM_Agent"
      description: "Define requirements and acceptance criteria for workflow engine"
    - name: "Architect_Agent" 
      description: "Design system architecture integrating with Phoenix/Elixir stack"
    - name: "Developer_Agent"
      description: "Implement workflow engine with APS parsing and execution"
    - name: "QA_Agent"
      description: "Validate workflow engine against Gherkin scenarios"
    - name: "DevOps_Agent"
      description: "Deploy and monitor workflow engine in production"
  activities:
    - name: "Requirements_Analysis"
      assignee: "PM_Agent"
      tasks:
        - name: "Generate_Gherkin_Scenarios"
          description: "Create executable scenarios for APS workflow processing"
        - name: "Define_Acceptance_Criteria"
          description: "Specify measurable success criteria for workflow engine"
  scenarios:
    - name: "Parse_APS_File"
      steps:
        - type: "Given"
          description: "A valid APS YAML file exists in the system"
        - type: "When" 
          description: "The workflow engine processes the APS file"
        - type: "Then"
          description: "The system correctly parses all process, roles, and activities"
    - name: "Execute_Agent_Handoff"
      steps:
        - type: "Given"
          description: "PM_Agent has completed requirements and notified Architect_Agent"
        - type: "When"
          description: "The workflow engine receives the handoff notification"
        - type: "Then" 
          description: "The system automatically assigns work to available Architect_Agent"
        - type: "And"
          description: "The agent status is updated to 'in_progress'"
    - name: "Track_Process_State"
      steps:
        - type: "Given"
          description: "Multiple agents are working on different process stages"
        - type: "When"
          description: "An agent completes their task"
        - type: "Then"
          description: "The system updates process state and triggers next agent"
        - type: "And"
          description: "All state changes are persisted and auditable"
  data_structures:
    - name: "aps_process_state"
      type: "record"
      fields:
        - name: "process_id"
          type: "string"
          description: "Unique identifier for the process"
        - name: "current_stage"
          type: "string" 
          description: "Current stage in PM->Architect->Developer->QA->DevOps flow"
        - name: "assigned_agent"
          type: "string"
          description: "Agent currently responsible for the process"
        - name: "status"
          type: "string"
          description: "ready|in_progress|blocked|completed"
        - name: "created_at"
          type: "timestamp"
          description: "Process creation timestamp"
        - name: "updated_at"
          type: "timestamp"
          description: "Last state change timestamp"

claim:
  agent_id: "1749964614_Developer_Agent"
  process_id: "001_APS_Workflow_Engine" 
  claimed_at: "2024-12-15T22:25:00Z"
  status: "completed"
  estimated_completion: "2024-12-15T23:30:00Z"

message:
  from: "Developer_Agent"
  to: "QA_Agent"
  timestamp: "2024-12-15T22:30:00Z"
  subject: "APS_Workflow_Engine_Implementation_Complete"
  content: "Development completed. Implemented APS parser, workflow engine, database schema, and comprehensive tests. Ready for QA validation."
  artifacts:
    - path: "phoenix_app/lib/self_sustaining/aps.ex"
      type: "code"
      status: "completed"
    - path: "phoenix_app/lib/self_sustaining/aps/workflow_engine.ex"
      type: "code"
      status: "completed"
    - path: "phoenix_app/lib/self_sustaining/aps/process_state.ex"
      type: "code"
      status: "completed"
    - path: "phoenix_app/lib/self_sustaining/aps/process.ex"
      type: "code"
      status: "completed"
    - path: "phoenix_app/lib/self_sustaining/aps/agent_assignment.ex"
      type: "code"
      status: "completed"
    - path: "phoenix_app/priv/repo/migrations/001_create_aps_tables.exs"
      type: "code"
      status: "completed"
    - path: "phoenix_app/test/self_sustaining/aps_test.exs"
      type: "tests"
      status: "completed"
    - path: "phoenix_app/test/self_sustaining/aps/workflow_engine_test.exs"
      type: "tests"
      status: "completed"