```mermaid
graph TB
    %% User Layer
    subgraph "ğŸ‘¥ User Layer"
        ADMIN[ğŸ‘¤ System Administrator]
        DEV[ğŸ‘©â€ğŸ’» Developer]
        AI_AGENT[ğŸ¤– AI Agent]
        CLAUDE_DESKTOP[ğŸ¤– Claude Desktop]
    end
    
    %% Load Balancer / Reverse Proxy
    subgraph "ğŸ”€ Load Balancer"
        NGINX[ğŸŒ Nginx<br/>Reverse Proxy<br/>Port 80/443]
        SSL[ğŸ”’ SSL Termination<br/>TLS 1.3]
    end
    
    %% Application Services
    subgraph "ğŸ—ï¸ Application Services"
        direction TB
        
        subgraph "Phoenix Application Cluster"
            PHOENIX1[ğŸ”¥ Phoenix App 1<br/>:4000]
            PHOENIX2[ğŸ”¥ Phoenix App 2<br/>:4001] 
            PHOENIX3[ğŸ”¥ Phoenix App 3<br/>:4002]
        end
        
        subgraph "n8n Workflow Engine"
            N8N_MAIN[âš™ï¸ n8n Main<br/>:5678]
            N8N_WORKER1[âš™ï¸ n8n Worker 1<br/>:5679]
            N8N_WORKER2[âš™ï¸ n8n Worker 2<br/>:5680]
        end
    end
    
    %% AI Services Layer
    subgraph "ğŸ¤– AI Services"
        CLAUDE_CLI[ğŸ¤– Claude Code CLI<br/>Local Process]
        TIDEWAVE[ğŸŒŠ Tidewave<br/>Runtime Intelligence<br/>:3000]
        MCP_PROXY[ğŸ”— MCP Proxy<br/>:4000/mcp]
        AI_ORCHESTRATOR[ğŸ§  AI Orchestrator<br/>GenServer]
    end
    
    %% Data Layer
    subgraph "ğŸ—„ï¸ Data Layer"
        POSTGRES_MASTER[ğŸ˜ PostgreSQL Master<br/>:5432]
        POSTGRES_REPLICA[ğŸ˜ PostgreSQL Replica<br/>:5433]
        VECTOR_DB[ğŸ§  Vector Database<br/>pgvector extension]
        REDIS[âš¡ Redis Cache<br/>:6379]
    end
    
    %% Storage Layer
    subgraph "ğŸ’¾ Storage Layer"
        APP_STORAGE[ğŸ“ Application Storage<br/>/var/lib/app]
        WORKFLOW_STORAGE[âš™ï¸ Workflow Storage<br/>/var/lib/n8n]
        BACKUP_STORAGE[ğŸ’¿ Backup Storage<br/>/var/backups]
        LOG_STORAGE[ğŸ“ Log Storage<br/>/var/log]
    end
    
    %% Monitoring & Observability
    subgraph "ğŸ“Š Monitoring Stack"
        PROMETHEUS[ğŸ“ˆ Prometheus<br/>:9090]
        GRAFANA[ğŸ“Š Grafana<br/>:3001]
        JAEGER[ğŸ” Jaeger<br/>:16686]
        LOKI[ğŸ“ Loki<br/>:3100]
    end
    
    %% External Services
    subgraph "ğŸŒ External Services"
        GITHUB[ğŸ™ GitHub<br/>Source Control]
        DOCKER_REGISTRY[ğŸ³ Docker Registry<br/>Container Images]
        BACKUP_SERVICE[â˜ï¸ Cloud Backup<br/>S3/GCS]
        MONITORING_SERVICE[ğŸ“¡ External Monitoring<br/>Status Page]
    end
    
    %% Network Connections
    ADMIN --> NGINX
    DEV --> NGINX
    AI_AGENT --> MCP_PROXY
    CLAUDE_DESKTOP --> MCP_PROXY
    
    NGINX --> SSL
    SSL --> PHOENIX1
    SSL --> PHOENIX2 
    SSL --> PHOENIX3
    SSL --> N8N_MAIN
    SSL --> GRAFANA
    
    %% Internal Service Communication
    PHOENIX1 --> POSTGRES_MASTER
    PHOENIX2 --> POSTGRES_MASTER
    PHOENIX3 --> POSTGRES_MASTER
    
    POSTGRES_MASTER --> POSTGRES_REPLICA
    POSTGRES_MASTER --> VECTOR_DB
    
    PHOENIX1 --> REDIS
    PHOENIX2 --> REDIS
    PHOENIX3 --> REDIS
    
    %% AI Service Integration
    PHOENIX1 --> AI_ORCHESTRATOR
    AI_ORCHESTRATOR --> CLAUDE_CLI
    AI_ORCHESTRATOR --> TIDEWAVE
    MCP_PROXY --> PHOENIX1
    
    %% n8n Integration
    N8N_MAIN --> N8N_WORKER1
    N8N_MAIN --> N8N_WORKER2
    N8N_MAIN --> POSTGRES_MASTER
    PHOENIX1 --> N8N_MAIN
    
    %% Storage Connections
    PHOENIX1 --> APP_STORAGE
    N8N_MAIN --> WORKFLOW_STORAGE
    POSTGRES_MASTER --> BACKUP_STORAGE
    
    %% Monitoring Connections
    PHOENIX1 --> PROMETHEUS
    N8N_MAIN --> PROMETHEUS
    POSTGRES_MASTER --> PROMETHEUS
    PROMETHEUS --> GRAFANA
    PHOENIX1 --> JAEGER
    LOKI --> LOG_STORAGE
    
    %% External Connections
    PHOENIX1 --> GITHUB
    BACKUP_STORAGE --> BACKUP_SERVICE
    GRAFANA --> MONITORING_SERVICE
    
    %% Health Checks
    subgraph "â¤ï¸ Health Checks"
        HEALTH_PHOENIX[âœ… Phoenix Health<br/>/api/health]
        HEALTH_N8N[âœ… n8n Health<br/>/healthz]
        HEALTH_DB[âœ… Database Health<br/>Connection Pool]
        HEALTH_AI[âœ… AI Health<br/>Claude CLI Status]
    end
    
    NGINX --> HEALTH_PHOENIX
    NGINX --> HEALTH_N8N
    POSTGRES_MASTER --> HEALTH_DB
    AI_ORCHESTRATOR --> HEALTH_AI
    
    %% Deployment Configuration
    subgraph "ğŸš€ Deployment Config"
        DOCKER_COMPOSE[ğŸ³ Docker Compose<br/>Multi-container Setup]
        ENV_CONFIG[âš™ï¸ Environment Config<br/>.env Files]
        SECRETS[ğŸ” Secrets Management<br/>Vault/K8s Secrets]
        CONFIG_MAPS[ğŸ“‹ Configuration Maps<br/>Application Config]
    end
    
    %% Auto-scaling
    subgraph "ğŸ“ˆ Auto-scaling"
        HPA[ğŸ“Š Horizontal Pod Autoscaler<br/>CPU/Memory Based]
        VPA[ğŸ“ Vertical Pod Autoscaler<br/>Resource Optimization]
        CLUSTER_AUTOSCALER[ğŸ¯ Cluster Autoscaler<br/>Node Management]
    end
    
    %% Security Layer
    subgraph "ğŸ” Security"
        WAF[ğŸ›¡ï¸ Web Application Firewall]
        RATE_LIMITER[â±ï¸ Rate Limiter]
        AUTH_SERVICE[ğŸ”‘ Authentication Service]
        RBAC[ğŸ‘® Role-Based Access Control]
    end
    
    NGINX --> WAF
    WAF --> RATE_LIMITER
    RATE_LIMITER --> AUTH_SERVICE
    AUTH_SERVICE --> RBAC
    
    %% Backup & Recovery
    subgraph "ğŸ’¿ Backup & Recovery"
        DB_BACKUP[ğŸ—„ï¸ Database Backup<br/>Automated Daily]
        APP_BACKUP[ğŸ“ Application Backup<br/>Code & Config]
        DISASTER_RECOVERY[ğŸš¨ Disaster Recovery<br/>RTO: 15min, RPO: 1hr]
    end
    
    POSTGRES_MASTER --> DB_BACKUP
    APP_STORAGE --> APP_BACKUP
    DB_BACKUP --> DISASTER_RECOVERY
    APP_BACKUP --> DISASTER_RECOVERY
    
    %% Port Mapping
    subgraph "ğŸ”Œ Port Configuration"
        PORTS[ğŸ“‹ Port Mapping<br/>
        â€¢ Nginx: 80, 443<br/>
        â€¢ Phoenix: 4000-4002<br/>
        â€¢ n8n: 5678-5680<br/>
        â€¢ PostgreSQL: 5432-5433<br/>
        â€¢ Redis: 6379<br/>
        â€¢ Prometheus: 9090<br/>
        â€¢ Grafana: 3001<br/>
        â€¢ Tidewave: 3000<br/>
        â€¢ Jaeger: 16686<br/>
        â€¢ Loki: 3100]
    end
    
    %% Styling
    classDef user fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef proxy fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef app fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef ai fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef data fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef storage fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    classDef monitoring fill:#ede7f6,stroke:#512da8,stroke-width:2px
    classDef external fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef health fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    classDef config fill:#fff8e1,stroke:#ff8f00,stroke-width:2px
    classDef security fill:#fafafa,stroke:#424242,stroke-width:2px
    classDef backup fill:#e8eaf6,stroke:#3f51b5,stroke-width:2px
    
    class ADMIN,DEV,AI_AGENT,CLAUDE_DESKTOP user
    class NGINX,SSL proxy
    class PHOENIX1,PHOENIX2,PHOENIX3,N8N_MAIN,N8N_WORKER1,N8N_WORKER2 app
    class CLAUDE_CLI,TIDEWAVE,MCP_PROXY,AI_ORCHESTRATOR ai
    class POSTGRES_MASTER,POSTGRES_REPLICA,VECTOR_DB,REDIS data
    class APP_STORAGE,WORKFLOW_STORAGE,BACKUP_STORAGE,LOG_STORAGE storage
    class PROMETHEUS,GRAFANA,JAEGER,LOKI monitoring
    class GITHUB,DOCKER_REGISTRY,BACKUP_SERVICE,MONITORING_SERVICE external
    class HEALTH_PHOENIX,HEALTH_N8N,HEALTH_DB,HEALTH_AI health
    class DOCKER_COMPOSE,ENV_CONFIG,SECRETS,CONFIG_MAPS,HPA,VPA,CLUSTER_AUTOSCALER,PORTS config
    class WAF,RATE_LIMITER,AUTH_SERVICE,RBAC security
    class DB_BACKUP,APP_BACKUP,DISASTER_RECOVERY backup
```